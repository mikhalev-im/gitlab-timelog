import{S as H,i as L,s as M,k as v,y as N,l as b,m as g,z as O,h as i,n as h,b as $,A as R,g as z,d as B,B as F,I as J,e as D,q as k,a as q,r as y,c as I,G as _,M as K,u as U,H as Q,N as V}from"../chunks/index.e6ee7f0b.js";import{P as T}from"../chunks/panel.9fef8ac1.js";import{q as W,g as X,a as Y}from"../chunks/urql-svelte.10f3327e.js";function A(n,e,l){const r=n.slice();return r[2]=e[l],r}function Z(n){let e,l,r,t,s=n[0].data.projects.nodes,a=[];for(let o=0;o<s.length;o+=1)a[o]=G(A(n,s,o));return{c(){e=v("h1"),l=k("Select project"),r=q(),t=v("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=b(o,"H1",{class:!0});var f=g(e);l=y(f,"Select project"),f.forEach(i),r=I(o),t=b(o,"DIV",{class:!0});var c=g(t);for(let d=0;d<a.length;d+=1)a[d].l(c);c.forEach(i),this.h()},h(){h(e,"class","text-xl font-bold text-gray-900 mb-6 px-4"),h(t,"class","mb-4 overflow-y-auto max-h-96")},m(o,f){$(o,e,f),_(e,l),$(o,r,f),$(o,t,f);for(let c=0;c<a.length;c+=1)a[c].m(t,null)},p(o,f){if(f&1){s=o[0].data.projects.nodes;let c;for(c=0;c<s.length;c+=1){const d=A(o,s,c);a[c]?a[c].p(d,f):(a[c]=G(d),a[c].c(),a[c].m(t,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=s.length}},d(o){o&&i(e),o&&i(r),o&&i(t),K(a,o)}}}function ee(n){let e,l,r=n[0].error.message+"",t;return{c(){e=v("p"),l=k("Oopsie! "),t=k(r)},l(s){e=b(s,"P",{});var a=g(e);l=y(a,"Oopsie! "),t=y(a,r),a.forEach(i)},m(s,a){$(s,e,a),_(e,l),_(e,t)},p(s,a){a&1&&r!==(r=s[0].error.message+"")&&U(t,r)},d(s){s&&i(e)}}}function te(n){let e,l;return{c(){e=v("p"),l=k("Loading...")},l(r){e=b(r,"P",{});var t=g(e);l=y(t,"Loading..."),t.forEach(i)},m(r,t){$(r,e,t),_(e,l)},p:Q,d(r){r&&i(e)}}}function re(n){let e,l=n[2].name.slice(0,1).toUpperCase()+"",r;return{c(){e=v("div"),r=k(l),this.h()},l(t){e=b(t,"DIV",{class:!0});var s=g(e);r=y(s,l),s.forEach(i),this.h()},h(){h(e,"class","w-12 h-12 flex-shrink-0 rounded bg-gray-100 border flex items-center justify-center text-xl text-slate-500")},m(t,s){$(t,e,s),_(e,r)},p(t,s){s&1&&l!==(l=t[2].name.slice(0,1).toUpperCase()+"")&&U(r,l)},d(t){t&&i(e)}}}function se(n){let e,l;return{c(){e=v("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){V(e.src,l=n[2].avatarUrl)||h(e,"src",l),h(e,"alt",""),h(e,"class","w-12 h-12 flex-shrink-0 rounded border")},m(r,t){$(r,e,t)},p(r,t){t&1&&!V(e.src,l=r[2].avatarUrl)&&h(e,"src",l)},d(r){r&&i(e)}}}function G(n){let e,l,r,t,s=n[2].name+"",a,o,f,c=(n[2].description||"")+"",d,C,j;function P(p,u){return p[2].avatarUrl?se:re}let E=P(n),m=E(n);return{c(){e=v("a"),m.c(),l=q(),r=v("div"),t=v("p"),a=k(s),o=q(),f=v("p"),d=k(c),C=q(),this.h()},l(p){e=b(p,"A",{href:!0,class:!0});var u=g(e);m.l(u),l=I(u),r=b(u,"DIV",{});var x=g(r);t=b(x,"P",{class:!0});var S=g(t);a=y(S,s),S.forEach(i),o=I(x),f=b(x,"P",{class:!0});var w=g(f);d=y(w,c),w.forEach(i),x.forEach(i),C=I(u),u.forEach(i),this.h()},h(){h(t,"class","font-medium text-slate-700 mb-2"),h(f,"class","text-sm"),h(e,"href",j="/projects/timelogs?project="+encodeURIComponent(n[2].id)),h(e,"class","flex gap-2 border-b p-4 hover:bg-slate-50")},m(p,u){$(p,e,u),m.m(e,null),_(e,l),_(e,r),_(r,t),_(t,a),_(r,o),_(r,f),_(f,d),_(e,C)},p(p,u){E===(E=P(p))&&m?m.p(p,u):(m.d(1),m=E(p),m&&(m.c(),m.m(e,l))),u&1&&s!==(s=p[2].name+"")&&U(a,s),u&1&&c!==(c=(p[2].description||"")+"")&&U(d,c),u&1&&j!==(j="/projects/timelogs?project="+encodeURIComponent(p[2].id))&&h(e,"href",j)},d(p){p&&i(e),m.d()}}}function le(n){let e;function l(s,a){return s[0].fetching?te:s[0].error?ee:Z}let r=l(n),t=r(n);return{c(){t.c(),e=D()},l(s){t.l(s),e=D()},m(s,a){t.m(s,a),$(s,e,a)},p(s,a){r===(r=l(s))&&t?t.p(s,a):(t.d(1),t=r(s),t&&(t.c(),t.m(e.parentNode,e)))},d(s){t.d(s),s&&i(e)}}}function ae(n){let e,l,r;return l=new T({props:{$$slots:{default:[le]},$$scope:{ctx:n}}}),{c(){e=v("div"),N(l.$$.fragment),this.h()},l(t){e=b(t,"DIV",{class:!0});var s=g(e);O(l.$$.fragment,s),s.forEach(i),this.h()},h(){h(e,"class","flex items-center justify-center m-4 h-screen")},m(t,s){$(t,e,s),R(l,e,null),r=!0},p(t,[s]){const a={};s&33&&(a.$$scope={dirty:s,ctx:t}),l.$set(a)},i(t){r||(z(l.$$.fragment,t),r=!0)},o(t){B(l.$$.fragment,t),r=!1},d(t){t&&i(e),F(l)}}}function oe(n,e,l){let r;const t=W({client:X(),query:Y`
			query {
				projects(membership: true) {
					nodes {
						id
						name
						avatarUrl
						description
					}
				}
			}
		`});return J(n,t,s=>l(0,r=s)),[r,t]}class fe extends H{constructor(e){super(),L(this,e,oe,ae,M,{})}}export{fe as default};
